{% load static %}
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <title>{{ component.name }}</title>
  <link rel="stylesheet" href="{% static '/componentlib/css/componentlib.css' %}">
  <script src="https://unpkg.com/htmx.org@1.9.10"></script>

  <script>
    function copyToClipboard(btn) {
      const code = btn.closest(".import-block").querySelector("code");
      if (!code) return;
  
      navigator.clipboard.writeText(code.innerText).then(() => {
        const original = btn.innerText;
        btn.innerText = "‚úÖ Kopieret!";
        btn.disabled = true;
        setTimeout(() => {
          btn.innerText = original;
          btn.disabled = false;
        }, 1500);
      });
    }
  </script>
  
</head>




<body>

<header>
  <nav>
    <a href="{% url 'component_browser' %}">‚Üê Tilbage til oversigt</a>
  </nav>
</header>

<main>
  <article>
    <header>
      <div class="component-header">
      <h1>
        {{ component.display_name }}  
        <small class="import-hint">‚Üí <code>{{ component.class_name }}</code></small>
        
      </h1>
      
      </div>
    </header>
   
    {% include "patternlib_browser/fragments/tags.html" with tags=component.tags %}
    {% if component.exists %}
      {% include "patternlib_browser/fragments/file_status.html" with comp=component %}
    {% endif %}

    <hr>

    <section>
      <h2>Beskrivelse</h2>
      {% if component.description %}
        <p>{{ component.description }}</p>
      {% endif %}
    </section>

    <hr>

    <section>
      <h2>Eksempel</h2>
      <div class="component-preview">
        {% if component.rendered %}
          {{ component.rendered|safe }}
        {% else %}
          <em>Ingen template tilg√¶ngelig for denne komponent.</em>
        {% endif %}
      </div>
    
      {% if component.rendered %}
        <h3>Rendered HTML</h3>
        <pre><code>{{ component.rendered|escape }}</code></pre>
      {% endif %}
    </section>
    
    <hr>
    <hr>
    <section class="mt-6">
      <h2>Importvejledning</h2>
      <button 
        class="btn-toggle"
        hx-get="{% url 'component_import_hint' key=component.key %}" 
        hx-target="#import-{{ component.key }}" 
        hx-swap="outerHTML">
        üì¶ Vis hvordan du importerer
      </button>
    
      <div id="import-{{ component.key }}" class="import-block">
        <em>(Klik for at hente importvejledning)</em>
      </div>
    </section>
    

    
    <hr>
    <section>
      <h2>Kodefiler</h2>
      {% for filename in code_files %}
  <div class="code-file">
    <div>
      <button
        hx-get="{% url 'component_code' key=component.key %}?file={{ filename }}" 
        hx-target="#code-block-{{ filename }}"
        hx-swap="innerHTML"
      >
        Vis/skjul {{ filename }}{% if filename == "template" %}.html{% else %}.py{% endif %}
      </button>
    </div>

    <div id="code-block-{{ filename }}"></div>
  </div>
{% endfor %}

    
    

    
    </section>
    
    
    
    


    {% if previous or next %}
      <nav class="component-nav">
        {% if previous %}
        <a href="{% url 'component_detail' key=previous.key %}">‚Üê {{ previous.name }}</a>
      {% else %}
        <span></span>
      {% endif %}
      {% if next %}
        <a href="{% url 'component_detail' key=next.key %}">{{ next.name }} ‚Üí</a>
      {% endif %}
      
      </nav>
    {% endif %}
  </article>
</main>

</body>
</html>
